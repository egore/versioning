<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	<!--@elvariable id="idPostfix" type="java.lang.String"-->
	<!--@elvariable id="project" type="de.egore911.versioning.persistence.model.Project"-->
	<rich:tabPanel switchType="client" id="projectActions#{idPostfix}">
		<rich:tab
			header="#{messages.actionCopies} (#{project.actionCopies.size()})">
			<ui:repeat var="actionCopy"
				value="#{project.actionCopies}">

				<rich:panel header="#{messages.actionCopy}">
					<h:commandLink
						action="#{projectDetail.deleteActionCopy(actionCopy)}"
						class="deletionlink" title="#{messages.actionCopy_delete}">
						<h:graphicImage value="/images/elementary/edit-delete.png" />
					</h:commandLink>

					<h:panelGrid columns="3" columnClasses="caption,value,help"
						style="padding-bottom: 15px;">
						<h:outputText value="#{messages.actionCopy_targetPath}" />
						<h:inputText value="#{actionCopy.targetPath}"
							id="actionCopy_targetPath" />
						<h:outputText value="#{messages.actionCopy_targetPath_help}" />

						<h:outputText value="#{messages.actionCopy_targetFilename}" />
						<h:inputText value="#{actionCopy.targetFilename}"
							id="actionCopy_targetFilename" />
						<h:outputText value="#{messages.actionCopy_targetFilename_help}" />
					</h:panelGrid>

					<h:commandButton
						action="#{projectDetail.chooseCopyMavenArtifact(actionCopy)}"
						value="#{messages.add_mavenartifact}"
						rendered="#{empty actionCopy.mavenArtifact and empty actionCopy.spacerUrl}" />
					<h:commandButton
						action="#{projectDetail.chooseCopySpacerUrl(actionCopy)}"
						value="#{messages.add_spacerurl}"
						rendered="#{empty actionCopy.mavenArtifact and empty actionCopy.spacerUrl}" />

					<h:commandLink
						action="#{projectDetail.deleteMavenArtifact(actionCopy.mavenArtifact)}"
						class="deletionlink"
						rendered="#{not empty actionCopy.mavenArtifact}"
						title="#{messages.mavenArtifact_delete}">
						<h:graphicImage value="/images/elementary/edit-delete.png" />
					</h:commandLink>
					<h:commandLink
						action="#{projectDetail.deleteSpacerUrl(actionCopy.spacerUrl)}"
						class="deletionlink" rendered="#{not empty actionCopy.spacerUrl}"
						title="#{messages.spacerUrl_delete}">
						<h:graphicImage value="/images/elementary/edit-delete.png" />
					</h:commandLink>
					<ui:include src="/layout/mavenArtifact_or_spacerUrl.xhtml">
						<ui:param name="actionEntity" value="#{actionCopy}" />
						<ui:param name="idPrefix" value="actionCopy_" />
					</ui:include>

				</rich:panel>
			</ui:repeat>
			<h:commandButton action="#{projectDetail.chooseCopy}"
				value="#{messages.actionCopy_add}" />
		</rich:tab>
		<rich:tab
			header="#{messages.actionExtractions} (#{project.actionExtractions.size()})">
			<ui:repeat var="actionExtraction"
				value="#{project.actionExtractions}">

				<rich:panel header="#{messages.actionExtraction}">
					<h:commandLink
						action="#{projectDetail.deleteActionExtraction(actionExtraction)}"
						class="deletionlink" title="#{messages.actionExtraction_delete}">
						<h:graphicImage value="/images/elementary/edit-delete.png" />
					</h:commandLink>

					<ui:repeat value="#{actionExtraction.extractions}" var="extraction">
						<h:commandLink
							action="#{projectDetail.deleteExtraction(extraction)}"
							class="deletionlink"
							title="#{messages.actionExtraction_extraction_delete}">
							<h:graphicImage value="/images/elementary/edit-delete.png" />
						</h:commandLink>
						<h:panelGrid columns="3" columnClasses="caption,value,help">
							<h:outputText value="#{messages.actionExtraction_source}" />
							<h:inputText value="#{extraction.source}" />
							<h:outputText value="#{messages.actionExtraction_source_help}" />
							<h:outputText value="#{messages.actionExtraction_destination}" />
							<h:inputText value="#{extraction.destination}" />
							<h:outputText
								value="#{messages.actionExtraction_destination_help}" />
						</h:panelGrid>
					</ui:repeat>

					<h:panelGrid columns="3" columnClasses="caption,value,help">
						<h:outputText value="" />
						<h:commandLink
							action="#{projectDetail.addExtraction(actionExtraction)}">
							<h:graphicImage value="/images/elementary/add.png"
								styleClass="linkimage" />
							<h:outputText value="#{messages.actionExtraction_add_extraction}"
								styleClass="linktext" />
						</h:commandLink>
						<h:outputText value="" />
					</h:panelGrid>


					<h:commandButton
						action="#{projectDetail.chooseExtractionMavenArtifact(actionExtraction)}"
						value="#{messages.add_mavenartifact}"
						rendered="#{empty actionExtraction.mavenArtifact and empty actionExtraction.spacerUrl}" />
					<h:commandButton
						action="#{projectDetail.chooseExtractionSpacerUrl(actionExtraction)}"
						value="#{messages.add_spacerurl}"
						rendered="#{empty actionExtraction.mavenArtifact and empty actionExtraction.spacerUrl}" />

					<h:commandLink
						action="#{projectDetail.deleteMavenArtifact(actionExtraction.mavenArtifact)}"
						class="deletionlink"
						rendered="#{not empty actionExtraction.mavenArtifact}"
						title="#{messages.mavenArtifact_delete}">
						<h:graphicImage value="/images/elementary/edit-delete.png" />
					</h:commandLink>
					<h:commandLink
						action="#{projectDetail.deleteSpacerUrl(actionExtraction.spacerUrl)}"
						class="deletionlink"
						rendered="#{not empty actionExtraction.spacerUrl}"
						title="#{messages.spacerUrl_delete}">
						<h:graphicImage value="/images/elementary/edit-delete.png" />
					</h:commandLink>
					<ui:include src="/layout/mavenArtifact_or_spacerUrl.xhtml">
						<ui:param name="actionEntity" value="#{actionExtraction}" />
						<ui:param name="idPrefix" value="actionExtraction_" />
					</ui:include>

				</rich:panel>
			</ui:repeat>
			<h:commandButton action="#{projectDetail.chooseExtraction}"
				value="#{messages.actionExtraction_add}" />
		</rich:tab>
		<rich:tab
			header="#{messages.actionCheckouts} (#{project.actionCheckouts.size()})">
			<h:commandButton action="#{projectDetail.chooseCheckout}"
				value="#{messages.actionCheckout_add}"
				rendered="#{empty project.actionCheckouts}" />

			<ui:repeat var="actionCheckout"
				value="#{project.actionCheckouts}">
				<rich:panel header="#{messages.actionCheckout}">
					<h:commandLink
						action="#{projectDetail.deleteActionCheckout(actionCheckout)}"
						class="deletionlink" title="#{messages.actionCheckout_delete}">
						<h:graphicImage value="/images/elementary/edit-delete.png" />
					</h:commandLink>

					<h:panelGrid columns="3" columnClasses="caption,value,help">
						<h:outputText value="#{messages.actionCheckout_source}" />
						<h:outputText
							value="#{project.vcsHost.uri}#{project.vcsPath}" />
						<h:outputText value="#{messages.actionCheckout_source_help}" />

						<h:outputText value="#{messages.actionCheckout_targetPath}" />
						<h:inputText value="#{actionCheckout.targetPath}" />
						<h:outputText value="#{messages.actionCheckout_targetPath_help}" />
					</h:panelGrid>
				</rich:panel>
			</ui:repeat>
		</rich:tab>
		<rich:tab
			header="#{messages.actionReplacements} (#{project.actionReplacements.size()})">
			<ui:include src="/layout/actionReplacement.xhtml">
				<ui:param name="entityDetail" value="#{projectDetail}" />
			</ui:include>
		</rich:tab>
	</rich:tabPanel>

</ui:composition>