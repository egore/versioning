<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="layout/core.xhtml">

	<ui:define name="title">
		<h:outputText value="#{messages.user}" />
	</ui:define>

	<rich:panel header="#{messages.user}">
		<h:panelGrid columns="3" columnClasses="caption,value,help">
			<h:outputText value="#{messages.user_name}" />
			<h:inputText value="#{userDetail.instance.name}" id="user_name" />
			<h:outputText value="#{messages.user_name_help}" />

			<h:outputText value="#{messages.user_login}" />
			<h:inputText value="#{userDetail.instance.login}" id="user_login" />
			<h:outputText value="#{messages.user_login_help}" />

			<h:outputText value="#{messages.user_password}" />
			<h:inputSecret value="#{userDetail.password}" id="user_password" />
			<h:outputText value="#{messages.user_password_help}" />
			<h:outputText value="#{messages.user_password_verify}" />
			<h:inputSecret value="#{userDetail.passwordVerify}"
				id="user_password_verify" />
			<h:outputText value="#{messages.user_password_verify_help}" />

			<h:outputText value="#{messages.user_email}" />
			<h:inputText value="#{userDetail.instance.email}" id="user_email" />
			<h:outputText value="#{messages.user_email_help}" />

			<h:outputText value="#{messages.user_roles}" />
			<h:selectManyMenu value="#{userDetail.instance.roles}"
				id="user_roles" converter="roleConverter">
				<f:selectItems value="#{userDetail.allRoleSelectItems}" />
				<!-- JSF 2 creates a clone of a completely valid PersistentBag making it lose it's entitymanager, see http://stackoverflow.com/questions/5610908/selectmanycheckbox-lazyinitializationexception-on-process-validation -->
				<f:attribute name="collectionType" value="java.util.ArrayList" />
			</h:selectManyMenu>
			<h:outputText value="#{messages.user_roles_help}" />
		</h:panelGrid>
	</rich:panel>

	<h:commandButton value="#{messages.save}" action="#{userDetail.save}" />

</ui:composition>